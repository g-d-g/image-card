/**
 * image-card - 0.1.0
 *
 * A Custom Element for an Image Card
 *
 * http://www.emanuel-kluge.de/
 *
 * Copyright (c) 2014 Emanuel Kluge;
 * Licensed MIT
 */
!function(a,b){function c(a){var b=(a-1)*this.offsetWidth;this.__slider.style.webkitTransform="translateX(-"+b+"px) translateZ(0)",this.__slider.style.mozTransform="translateX(-"+b+"px) translateZ(0)",this.__slider.style.transform="translateX(-"+b+"px) translateZ(0)"}function d(){var a=this.images[this.current-1].naturalWidth,d=this.images[this.current-1].naturalHeight;this.querySelector(".wrapper").style.paddingBottom=d/a*100+"%",this.current>1&&(c.call(this,this.current),b.fireEvent(this,"change",{detail:{current:this.current}}))}function e(){for(var a=this;a.parentNode;){if("IMAGE-CARD"===a.parentNode.nodeName)return a.parentNode;a=a.parentNode}return null}function f(a){h(this.buttons,function(a){a.classList.remove("current")}),this.buttons[a.detail.current-1].classList.add("current")}function g(a){this.__parent.current=a.target.getAttribute("data-index")}var h=Array.prototype.forEach.call.bind(Array.prototype.forEach),i=Object.create({lifecycle:Object.create(null),methods:Object.create(null),accessors:Object.create(null),events:Object.create(null)});i.lifecycle.created=function(){var a=b.createFragment('<div>     <div class="wrapper">       <div class="wrapper-inner">         <div class="slider"></div>       </div>     </div>   </div>'),c=a.querySelector(".slider");h(this.images,function(a){c.appendChild(a.cloneNode(!0))}),h(this.childNodes,function(a){"IMG"===a.nodeName&&a.remove()}),b.innerHTML(this,a.childNodes[0].innerHTML+this.innerHTML),this.__slider=this.querySelector(".slider"),this.current||(this.current=this.current||1),-1===this.tabIndex&&(this.tabIndex=0),this.setAttribute("role","listbox"),this.images[this.current-1]&&(this.images[this.current-1].onload=d.bind(this))},i.lifecycle.attributeChanged=function(a,d,e){"current"===a&&(c.call(this,e),b.fireEvent(this,"change",{detail:{current:e}}))},i.accessors.images={get:function(){return this.getElementsByTagName("img")}},i.accessors.current={attribute:{name:"current"}},i.events["keyup:keypass(37)"]=function(){this.prev()},i.events["keyup:keypass(39)"]=function(){this.next()},i.events["dragstart:delegate(img)"]=function(a){a.preventDefault()},i.methods.prev=function(){return this.current>1&&(this.current=parseInt(this.current,10)-1),this},i.methods.next=function(){return this.current<this.images.length&&(this.current=parseInt(this.current,10)+1),this},a.ImageCard=b.register("image-card",i);var j=Object.create({lifecycle:Object.create(null),accessors:Object.create(null)});j.lifecycle.created=function(){var a,c,d=e.call(this);d&&(this.__parent=d,d.setAttribute("data-card-control",!0),a=this,c=document.createElement("button"),c.type="btn",c.className="btn",h(d.images,function(b,d){var e=c.cloneNode(!0);e.setAttribute("data-index",d+1),a.appendChild(e)}),b.addEvent(d,"change",f.bind(this)),b.addEvent(this,"click:delegate(button)",g.bind(this)))},j.accessors.buttons={get:function(){return this.getElementsByTagName("button")}},a.CardControl=b.register("card-control",j)}(window,xtag);